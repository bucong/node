<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" >
		<link rel="stylesheet" href="component/wangEditor/wangEditor.min.css">
		<script src="js/jquery-2.1.0.js" type="text/javascript" charset="utf-8"></script>
		<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="component/wangEditor/wangEditor.min.js"></script>
		<style>
			.news{padding-top: 100px;}
			.btn-primary{margin-top: 20px;}
      .change-news{display: none;}
		</style>
	</head>
	<body>
		<article class="container news">
			<div class="form-group">
				<label for="article-name">文章标题：</label>
				<input type="text" class="form-control" id="article-name" placeholder="文章标题">
			</div>
        <div class="form-group">
            <select name="" id="type" class="form-control">
                <option value="新闻">新闻</option>
                <option value="日记">日记</option>
            </select>
        </div>
			<div id="editor">

			</div>
			<div class="form-group">
				<button class="sub-news btn btn-primary">提交</button>
				<button class="change-news btn btn-primary">修改</button>
			</div>
		</article>
		<script src="js/main.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
        var E = window.wangEditor
        var editor = new E('#editor')
        // 或者 var editor = new E( document.getElementById('editor') )
        editor.create();

        if(GetUrl("id")){
            $('.change-news').show();
            $('.sub-news').hide();
            $.ajax({
                type: 'get',
                url:'/news/news_detail',
                data:{id:GetUrl("id")},
                async:true,
                dataType:'JSON',
                success:function(res){
                    console.log(res);
                    $('#article-name').val(res.name);
                    $('#type').val(res.type);
                    $('.news #editor .w-e-text').html(res.content);
                },error:function(res){
                    console.log(res);
                }
            });
        }
        function GetUrl(name) {
            var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if(r!=null)return  unescape(r[2]); return null;
        }
		</script>
	</body>
</html>
